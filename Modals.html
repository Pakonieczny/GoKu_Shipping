<div id="configModal" class="modal">
  <div class="modal-content">
    <h4>Configure UI Elements</h4>
    <p>Available Button ID (from Dummy button):</p>
    <!-- Text area that will display the dummy button's ID -->
    <textarea id="availableButtonsList" readonly></textarea>
    <p>Adjust Left and Top offsets for Dummy button:</p>
    <table class="striped" id="configTable">
      <thead>
        <tr>
          <th>Element ID</th>
          <th>Left (px)</th>
          <th>Top (px)</th>
        </tr>
      </thead>
      <tbody>
        <!-- A row will be inserted dynamically -->
      </tbody>
    </table>
  </div>
  <div class="modal-footer">
    <a href="#!" id="saveConfigBtn" class="modal-close waves-effect waves-green btn">Save Config</a>
  </div>
</div>

<!-- jQuery and Materialize JS (included here again so that modals.html is self-contained) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    M.AutoInit();
    
    // Global function to populate the configuration table
    window.populateConfigTable = function() {
      var tbody = document.getElementById("configTable").querySelector("tbody");
      tbody.innerHTML = ""; // Clear any existing rows
      console.log("Populating configuration table...");
      
      // For this simple example, we only configure the Dummy button.
      var dummy = document.getElementById("dummyButton");
      if (dummy) {
        var id = dummy.id || "no-id";
        // Get computed style values for left and top; if not set, default to 0.
        var computedStyle = window.getComputedStyle(dummy);
        var leftVal = (computedStyle.left === "auto") ? 0 : parseInt(computedStyle.left);
        var topVal = (computedStyle.top === "auto") ? 0 : parseInt(computedStyle.top);
        console.log("Dummy button:", id, "Left:", leftVal, "Top:", topVal);
        
        // Create a table row for the Dummy button
        var row = document.createElement("tr");
        row.innerHTML = `
          <td>${id}</td>
          <td><input type="number" value="${leftVal}" data-id="${id}" class="left-input"></td>
          <td><input type="number" value="${topVal}" data-id="${id}" class="top-input"></td>
        `;
        tbody.appendChild(row);
        
        // Update the text area to forcefully show the dummy button's ID.
        document.getElementById("availableButtonsList").value = id;
        
        // Attach live update event listeners so that changes update the dummy button's style immediately.
        row.querySelector(".left-input").addEventListener("input", function() {
          var newVal = this.value;
          dummy.style.left = newVal + "px";
          console.log(id, "updated left to", newVal);
        });
        row.querySelector(".top-input").addEventListener("input", function() {
          var newVal = this.value;
          dummy.style.top = newVal + "px";
          console.log(id, "updated top to", newVal);
        });
      } else {
        console.warn("Dummy button not found.");
        document.getElementById("availableButtonsList").value = "Dummy button not found";
      }
    };
    
    // Save Config button handler (for now, just logs a message)
    document.getElementById("saveConfigBtn").addEventListener("click", function() {
      console.log("Configuration saved.");
    });
  });
</script>